name: Handle New Issue

on:
  issues:
    types: [opened]

jobs:
  greet_and_label:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    
    steps:
      - name: Greet new issue creator
        uses: actions/github-script@v7
        with:
          script: |
            const issue = context.payload.issue;
            const issueCreator = issue.user.login;
            
            const greeting = `ğŸ‘‹ Hi @${issueCreator}!
            
            Thank you for creating this issue! We appreciate you taking the time to report this.
            
            Our team will review your issue soon. In the meantime:
            - Please ensure you've provided all necessary details
            - Check if there are any similar existing issues
            - Feel free to provide additional context if needed
            
            Thank you for contributing to FashionHub! ğŸ›ï¸`;
            
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue.number,
              body: greeting
            });
      
      - name: Add triage label
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.addLabels({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.issue.number,
              labels: ['triage']
            });
